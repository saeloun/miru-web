<!DOCTYPE html>
<html>
  <head>
    <meta content='text/html; charset=UTF-8' http-equiv='Content-Type'/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <style type="text/css">
      .desktop-invoice {
        width: 640px;
        height: 702px;
        margin: 0 auto;
      }
      .mobile-invoice {
        width: 360px;
        margin: 0 auto;
        display: none;
      }
      @media only screen and (max-width: 640px) {
        .desktop-invoice {
          display: none;
        }

        .mobile-invoice {
          display: block;
        }
      }
    </style>
  </head>
  <body style="color:#1D1A31">
    <div class="desktop-invoice">
      <div id="header" style="padding:0 40px;">
        <div
          style="padding: 30px 40px; background:white ;border-bottom: 2px solid #E1E6EC; text-align: center"
        >
          <div style="padding: 10px; display: inline-block; text-align: center;">
            <% if @company_logo.present? %>
                <%= image_tag @company_logo, height: 80, width: 80, style: "border-radius: 80px" %>
            <% else %>
              <div style="margin:auto;width:80px;height:80px;border-radius: 80px;text-align: center;background: #CDD6DF;font-size: 40px; color:white; display: table;"><div style="display:table-cell; vertical-align: middle;"><%= @invoice.company.name.slice(0) %></div>
            <% end %>
          </div>
          <div style="margin-top: 10px;">
            <span style='font-weight:bold'><%= @invoice.company.name %></span>
            has sent you an invoice.
          </div>
        </div>
      </div>
      <div id="body" style="color:#1D1A31">
        <% if @message.present? %>
          <div style="margin: 40px; padding: 20px; background: #F5F7F9; border-radius: 8px;">
            <%= simple_format(@message) %>
          </div>
        <% end %>
        
        <div
          style="margin: 40px; text-align: center; font-weight:bold; font-size: 24px; line-height:28px;"
        >
          Invoice Summary
        </div>
        <table style="width: 100%; margin: 40px ; border-collapse: separate;border-spacing: 0 15px;">
          <colgroup>
            <col width="40%">
            <col width="40%">
            <col width="20">
          </colgroup>
          <tr style="width: 100%" valign="top">
            <td>
              <div style=' font-weight:normal; font-size:12px;'>Date of Issue</div>
              <div style="font-weight:normal; font-size:16px;"><%= @invoice.issue_date.strftime("%B %d, %Y") %>
              </div>
            </td>
            <td>
              <div style=' font-weight:normal; font-size:12px;'>Invoice Number</div>
              <div style="font-weight:normal; font-size:16px;"><%= @invoice.invoice_number %></div>
            </td>
            <td align="left">
              <div style=' font-weight:normal; font-size:12px;'>Total</div>
              <div style="font-weight:normal; font-size:12px;">Amount</div>
            </td>
          </tr>
          <tr style="width: 100%; margin-top: 15px">
            <td style="">
              <div style=' font-weight:normal; font-size:12px;'>Due Date</div>
              <div style="font-weight:normal; font-size:16px;"><%= @invoice.due_date.strftime("%B %d, %Y") %></div>
            </td>
            <td>
              <div style=' font-weight:normal; font-size:12px;'>Reference</div>
              <div style="font-weight:normal; font-size:16px;"><%= @invoice.reference.blank? ? "-" : @invoice.reference %></div>
            </td>
            <td align="left">
              <div style="font-weight:normal; font-size:24px; margin-right: 40px;"><%= @amount || "-" %></div>
            </td>
          </tr>
        </table>
        
        <div style="text-align: center; margin: 40px 0;">
          <p style="color: #666; font-size: 14px;">Please find the invoice attached to this email.</p>
        </div>
        
        <div style="text-align: center">
          <%= link_to "VIEW INVOICE ONLINE", @invoice_url,
          target: "_blank",
          style: "cursor:pointer; font-weight:bold; font-size:16px; color:white;letter-spacing: 2px;align-items:center; align-self:center; line-height: 22px; border-radius: 4px; border:none; margin:40px 0; padding:8px 64px;text-decoration:none; background: #5B34EA; display: inline-block;"
        %>
        </div>
      </div>
      <div id="footer">
        <div
          style="font-family: 'Manrope'; padding:24px; align-items:center; background:#F5F7F9; text-align:center;"
        >
          <table style=" width:80%; margin: 0 auto; padding-top:16px;">
            <tr>
              <td
                align="right"
                style="font-size:14px; font-weight:normal; color:#A5A3AD; display: inline-block;"
              >Powered by</td>
              <td align="left" style="vertical-align: middle; display: inline-block;">
                <%= image_tag '/miruLogoWithText.png', height: '48px', width: '120px', alt: 'Miru logo' %>
              </td>
            </tr>
          </table>
          <div>
            Time tracking and Invoicing Software for every business
          </div>
        </div>
        <div
          style="font-family: 'Manrope'; padding-left:40px; padding-right:40px; padding-top:12px; padding-bottom:12px; color:white; background:#5B34EA;"
        >
          <span
            style="font-size:12px; font-weight:normal; line-height: 16px; text-align: center;"
          >Â© Miru. All rights reserved.</span>
        </div>
      </div>
    </div>
  </body>
</html>